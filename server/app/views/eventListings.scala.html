@import model.Conference
@(query: String, searchResults: Seq[Conference])(webJarAssets: WebJarAssets)

@apiKeyParam = @{Option((System.getenv("GOOGLE_MAPS_API_KEY"))).map(key => s"?key=$key").getOrElse("")}

<!DOCTYPE html>
<html lang="en">
    <head>
        <title>@query Scala Events</title>
        <link rel='stylesheet' href='@routes.WebJarAssets.at(webJarAssets.locate("css/bulma.css"))'>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js@apiKeyParam"></script>
    </head>
    <body>

        <div id="container" class="container">

            <div class="field">
                <div class="control">
                    <div class="select">
                        <select id="query">
                            <option value="upcoming">Upcoming conferences</option>
                            <option value="past">Past conferences</option>
                            <option value="all">All conferences</option>
                        </select>
                    </div>
                    <button class="button is-primary toggle-map-modal" id="show-map">
                        Show map
                    </button>
                </div>
            </div>

            <div class="modal" id="mapModal">
                <div class="modal-background toggle-map-modal"></div>
                <div class="modal-card">
                    <header class="modal-card-head">
                        <p class="modal-card-title">All Events</p>
                        <button class="delete toggle-map-modal" aria-label="close"></button>
                    </header>
                    <section class="modal-card-body">
                        <div id="map" style="height: 500px"></div>
                    </section>
                    <footer class="modal-card-foot">
                        <button class="button toggle-map-modal">Close</button>
                    </footer>
                </div>
            </div>

            <div id="event-listings">
                @eventsTable(searchResults)
            </div>

        </div>

        @scalajs.html.scripts("client", routes.Assets.versioned(_).toString, name => getClass.getResource(s"/public/$name") != null)
        <script type="application/javascript">
            App.main()
        </script>
    </body>
</html>
